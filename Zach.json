{
  "name": "Zach from Priority Roofing",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "minutes",
              "minutesInterval": 3
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        0,
        0
      ],
      "id": "d613489e-08de-4b71-bd28-dcc363aff096",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2821f87d-0df0-4ad8-819e-038af9852998",
              "name": "ID",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "e26e65ff-570d-4a1e-9e0d-72cda2d573e3",
              "name": "First Name",
              "value": "={{ $json['First Name'] }}",
              "type": "string"
            },
            {
              "id": "35f68617-b775-47da-8ebb-5b094ab81cc1",
              "name": "Mobile",
              "value": "={{ $json['Phone Number'] }}",
              "type": "string"
            },
            {
              "id": "cb54ad4f-1479-4569-b0e9-5c61dd50c82c",
              "name": "Address",
              "value": "={{ $json['Property Address'] }}",
              "type": "string"
            },
            {
              "id": "1fcc4dba-e953-407d-821d-a589632135c0",
              "name": "Office Type",
              "value": "={{ $json['Property Type'] }}",
              "type": "string"
            },
            {
              "id": "64d54b71-92d4-4db2-8da5-ee4a769db604",
              "name": "Extra Info",
              "value": "={{ $json['Property Info'] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        660,
        0
      ],
      "id": "812dd952-04e0-4b3c-a7df-0ab51aa799ef",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appE5y13csfXlZpzx",
          "mode": "list",
          "cachedResultName": "Free Inspection Booking",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx"
        },
        "table": {
          "__rl": true,
          "value": "tbla2fmK5ZTEYEcuo",
          "mode": "list",
          "cachedResultName": "Leads",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx/tbla2fmK5ZTEYEcuo"
        },
        "filterByFormula": "({Status} = 'TBC')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        220,
        0
      ],
      "id": "b9852174-2634-4abf-a09c-049b746c2c71",
      "name": "Airtable",
      "credentials": {
        "airtableTokenApi": {
          "id": "yGjpocFdI8wQrhte",
          "name": "Foluke-Levi Airtable"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.vapi.ai/call",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 227285d3-37cc-4386-bccc-1f40b45dfd21"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"assistantId\": \"99c000cd-ce5b-4b1c-b826-be300fd8a78e\",\n  \"assistantOverrides\": {\n    \"variableValues\": {\n      \"id\": \"{{ $json.ID }}\",\n      \"name\": \"{{ $json['First Name'] }}\",\n      \"phoneNumber\": \"{{ $json.Mobile }}\",\n      \"address\": \"{{ $json.Address }}\",\n      \"officeType\": \"{{ $json['Office Type'] }}\",\n      \"extraInfo\": \"{{ $json['Extra Info'] }}\"\n    }\n  },\n  \"customer\": {\n    \"number\": \"{{ $json.Mobile }}\"\n  },\n  \"phoneNumberId\": \"a2fd86fa-eb02-4e3d-bb02-fdb8c9075ae4\"\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        880,
        0
      ],
      "id": "3f5e375d-0955-462e-aa4e-41905e032d8a",
      "name": "Trigger VAPI Call"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appE5y13csfXlZpzx",
          "mode": "list",
          "cachedResultName": "Free Inspection Booking",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx"
        },
        "table": {
          "__rl": true,
          "value": "tbla2fmK5ZTEYEcuo",
          "mode": "list",
          "cachedResultName": "Leads",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx/tbla2fmK5ZTEYEcuo"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Edit Fields').item.json.ID }}",
            "Status": "In-Progress",
            "ID": "={{ $('Edit Fields').item.json.ID }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "First Name",
              "displayName": "First Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Phone Number",
              "displayName": "Phone Number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Property Address",
              "displayName": "Property Address",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Type",
              "displayName": "Property Type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Info",
              "displayName": "Property Info",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "In-Progress",
                  "value": "In-Progress"
                },
                {
                  "name": "Failed",
                  "value": "Failed"
                },
                {
                  "name": "Called",
                  "value": "Called"
                },
                {
                  "name": "Voicemail",
                  "value": "Voicemail"
                },
                {
                  "name": "TBC",
                  "value": "TBC"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Outcome",
              "displayName": "Outcome",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Appointment Booked",
                  "value": "Appointment Booked"
                },
                {
                  "name": "No Appointment",
                  "value": "No Appointment"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Inspection Date",
              "displayName": "Inspection Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Attempt",
              "displayName": "Attempt",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "#1",
                  "value": "#1"
                },
                {
                  "name": "#2",
                  "value": "#2"
                },
                {
                  "name": "#3",
                  "value": "#3"
                },
                {
                  "name": "Unreachable",
                  "value": "Unreachable"
                },
                {
                  "name": "#Success",
                  "value": "#Success"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Transcript",
              "displayName": "Transcript",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Last Hope",
              "displayName": "Last Hope",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1100,
        0
      ],
      "id": "6d2c8ace-512b-4bfe-b7c0-728e23a93c34",
      "name": "Update Lead Record",
      "credentials": {
        "airtableTokenApi": {
          "id": "yGjpocFdI8wQrhte",
          "name": "Foluke-Levi Airtable"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        440,
        0
      ],
      "id": "40e6a9b1-70fe-4619-a093-efc067213aeb",
      "name": "Limit"
    },
    {
      "parameters": {
        "resource": "calendar",
        "calendar": {
          "__rl": true,
          "value": "3524b2651ff1eb066c21a939d88b39b2ea9e82dd09b001011fa1c97ad3ab6dd4@group.calendar.google.com",
          "mode": "list",
          "cachedResultName": "Inspection Appointments"
        },
        "timeMin": "={{ $fromAI('Start_Time', `start time of the booking in ISO 8601 format WITHOUT timezone offset, e.g., 2025-04-12T15:00:00`, 'string') + '-05:00' }}",
        "timeMax": "={{ $fromAI('End_Time', `end time of the booking in ISO 8601 format WITHOUT timezone offset, e.g., 2025-04-12T16:00:00`, 'string') + '-05:00' }}",
        "options": {}
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        900,
        630
      ],
      "id": "5ce0011d-16dc-40dd-b0b5-23b59e7de83c",
      "name": "Availability Tool",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "w6RmgsUVZuLY0TCM",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json['Booking Info'].Date }} --> This is the requested booking date. ",
        "options": {
          "systemMessage": "=The current date is {{ $now }}.\n\nYou are a scheduling assistant. Your job is to check if the user's requested date and time is available using the Availability Tool.\n\n---\n\n🔧 Step 1: Use the **Availability Tool**\n- Call the Availability Tool using the `Start_Time` and `End_Time` values extracted from the user's request.\n- The slot is **assumed to be 1 hour** unless stated otherwise.\n- The tool will return any conflicting calendar events that overlap with the requested time window.\n\n---\n\n📋 Step 2: Interpret the Result\n- If the tool returns **one or more events**, the time is **booked**.\n  - Then, suggest 3 alternative 1-hour time slots on the same day, between 9 AM and 5 PM.\n  - Format your response as:\n    ```\n    Unavailable at requested time. Suggested alternatives: [10:00 AM, 2:00 PM, 3:30 PM]\n    ```\n- If the tool returns **no events**, respond with:\n    ```\n    Available\n    ```\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        692,
        410
      ],
      "id": "3072f032-fdb4-4ae8-b22d-6ec07dcaab29",
      "name": "Check Availability",
      "retryOnFail": true
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-3.5-turbo",
          "mode": "list",
          "cachedResultName": "gpt-3.5-turbo"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        660,
        630
      ],
      "id": "759121bc-e23e-4d91-b1c0-d1fc12cdfede",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "lwnvKDh7b8Veic38",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "24f312a6-6332-4af0-b540-46f651a63de4",
              "leftValue": "={{ $json.Result }}",
              "rightValue": "Available",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "f6ffff4e-61da-4287-837a-e58a65b834b9",
              "leftValue": "={{ $json.Result }}",
              "rightValue": "Output: Available",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1540,
        510
      ],
      "id": "4b4c1cfc-2b3b-4a3d-9ab5-e3ec9662e162",
      "name": "If1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1760,
        480
      ],
      "id": "2b3011e3-cddb-4d94-a463-132c229312e7",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "lwnvKDh7b8Veic38",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=This is the booking info:\n\n{{ $('Edit Fields1').item.json['Booking Info'].ID }}\nRequested Date: {{ $('Edit Fields1').item.json['Booking Info'].Date }}\nCustomer Name: {{ $('Edit Fields1').item.json['Booking Info'].Name }}\nCustomer Address: {{ $('Edit Fields1').item.json['Booking Info'].Address }}",
        "options": {
          "systemMessage": "=The current date is: {{ $now }}\n\n---\n\n### 🎯 Task: Handle Customer Booking Request\n\nYou are a scheduling assistant. Complete the steps **in order**, invoking **only one tool per iteration**. Wait for a tool's response **before proceeding to the next step**.\n\n❗ Never invoke the same tool more than once per booking flow.  \n❗ Stop immediately if any tool fails or returns unexpected output.\n\n---\n\n#### 1. Extract Booking Details  \nFrom the user message, extract:\n- Customer’s **Name**  \n- Customer’s **ID** (format: `rec...`)  \n- Requested **Booking Date** (format: \"2025-04-12T15:00:00\")  \n\n---\n\n#### 2. Retrieve Customer Info  \n- Use the **Get Airtable Record** tool  \n- Match using the **Customer ID**  \n- Retrieve:  \n  - Phone Number  \n  - Address  \n\n---\n\n#### 3. Create the Booking (Book Appointment)  \n- Use the **Book Appointment** tool with:\n  - `Start_Time` and `End_Time` from the customer's confirmed time\n  - `Description` and `Summary` as:  \n    ```\n    Free Inspection for [Customer Name] at [Address]\n    ```\n\n✅ Proceed only if the tool returns:  \n  - `\"status\": \"confirmed\"`  \n  - A valid `\"id\"`  \n  - A valid `start.dateTime` value  \n\n✔️ Store values if successful:\n- `Booking_Confirmed = true`  \n- `Confirmed_Time = start.dateTime`\n\n❌ If not, stop and return:  \n```\nError in step 4: Booking failed or incomplete calendar response.\n```\n\n---\n\n#### 4. [Optional] Send SMS Confirmation  \n- If `Booking_Confirmed = true`, use the **Twilio** tool to send:  \n```\nHi, [Customer Name]. Your free roofing inspection with Levi from Priority Roofing has been booked successfully for [Date] [Time]. I look forward to checking in on your roof and ensuring it is well protected for the long term.\n```\n\n✅ If SMS fails or Twilio is disabled, skip and continue.\n\n---\n\n#### 5. Update Airtable Record  \n- Use the **Update Airtable Record** tool  \n- Match using the **Customer ID**  \n- Update:\n  - `Status`: `\"Called\"`  \n  - `Outcome`: `\"Appointment Booked\"`  \n  - `Inspection Date`: `Confirmed_Time` (in ISO 8601 UTC format)  \n  - `Attempt`: `\"#1\"`  \n\n❗ Do not use hardcoded times. Only use the calendar-confirmed time.\n\n---\n\n### ✅ FINAL INSTRUCTION  \nIf all steps succeed, return only:\n```\nI have successfully created the booking for [Customer Name] at [Time] on [Date] for the Free Inspection. Looking forward to seeing you soon!\n```\n\n---\n\n### 🧯 Error Handling  \nIf any tool fails, returns empty, or has missing/invalid data:  \nStop and return:  \n```\nError in step [Step Number]: [Brief Description]\n```\n\nDo not retry any tools unless explicitly instructed.\n",
          "maxIterations": 5,
          "returnIntermediateSteps": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        1972,
        260
      ],
      "id": "34307aec-4dae-416f-ad24-3d7e8cc0c64b",
      "name": "Create Booking",
      "retryOnFail": false
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "a9db41e4-847a-41a2-8d72-9ebd88e9924b",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        0,
        910
      ],
      "id": "1d84c14f-883a-4148-9fd8-f36f90b8c4a1",
      "name": "bookAppointment",
      "webhookId": "a9db41e4-847a-41a2-8d72-9ebd88e9924b"
    },
    {
      "parameters": {
        "from": "+19034855387",
        "to": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('To', `Customer Phone Number`, 'string') }}",
        "toWhatsapp": "",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', `Hi, [Customer Name]. Your free roofing inspection with Levi from Priority Roofing has been booked successfully for [Date] [Time]. I look forward to checking in on your roof and ensuring it is well protected for the long term.`, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.twilioTool",
      "typeVersion": 1,
      "position": [
        2000,
        480
      ],
      "id": "4adc576c-8794-4482-9cf0-5a161b2aa664",
      "name": "Twilio",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appE5y13csfXlZpzx",
          "mode": "list",
          "cachedResultName": "Free Inspection Booking",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx"
        },
        "table": {
          "__rl": true,
          "value": "tbla2fmK5ZTEYEcuo",
          "mode": "list",
          "cachedResultName": "Leads",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx/tbla2fmK5ZTEYEcuo"
        },
        "filterByFormula": "={{ $fromAI('Filter_By_Customer_ID', `only the 'rec...' part`, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtableTool",
      "typeVersion": 2.1,
      "position": [
        2120,
        480
      ],
      "id": "f1b4fedb-e77a-4070-b472-4bbaa01d7df5",
      "name": "Get Airtable Record",
      "credentials": {
        "airtableTokenApi": {
          "id": "yGjpocFdI8wQrhte",
          "name": "Foluke-Levi Airtable"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appE5y13csfXlZpzx",
          "mode": "list",
          "cachedResultName": "Free Inspection Booking",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx"
        },
        "table": {
          "__rl": true,
          "value": "tbla2fmK5ZTEYEcuo",
          "mode": "list",
          "cachedResultName": "Leads",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx/tbla2fmK5ZTEYEcuo"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('id__using_to_match_', `This is the Customer ID to use to match.`, 'string') }}",
            "Status": "Called",
            "Outcome": "Appointment Booked",
            "Inspection Date": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Inspection_Date', `This is the Inspection Date and time booked for the Customer in CDT (e.g., 2025-04-12T10:00:00-05:00). Airtable will store it in UTC (e.g., 2025-04-12T15:00:00Z).`, 'string') }}",
            "Attempt": "#1"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "First Name",
              "displayName": "First Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Phone Number",
              "displayName": "Phone Number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Property Address",
              "displayName": "Property Address",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Property Type",
              "displayName": "Property Type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Property Info",
              "displayName": "Property Info",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "In-Progress",
                  "value": "In-Progress"
                },
                {
                  "name": "Failed",
                  "value": "Failed"
                },
                {
                  "name": "Called",
                  "value": "Called"
                },
                {
                  "name": "Voicemail",
                  "value": "Voicemail"
                },
                {
                  "name": "TBC",
                  "value": "TBC"
                },
                {
                  "name": "t",
                  "value": "t"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Outcome",
              "displayName": "Outcome",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Appointment Booked",
                  "value": "Appointment Booked"
                },
                {
                  "name": "No Appointment",
                  "value": "No Appointment"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Inspection Date",
              "displayName": "Inspection Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attempt",
              "displayName": "Attempt",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "#1",
                  "value": "#1"
                },
                {
                  "name": "#2",
                  "value": "#2"
                },
                {
                  "name": "#3",
                  "value": "#3"
                },
                {
                  "name": "Unreachable",
                  "value": "Unreachable"
                },
                {
                  "name": "#Success",
                  "value": "#Success"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Last Hope",
              "displayName": "Last Hope",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtableTool",
      "typeVersion": 2.1,
      "position": [
        2240,
        480
      ],
      "id": "cfa25946-b292-48e3-829b-07801adb05f0",
      "name": "Update Airtable Record",
      "credentials": {
        "airtableTokenApi": {
          "id": "yGjpocFdI8wQrhte",
          "name": "Foluke-Levi Airtable"
        }
      }
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "3524b2651ff1eb066c21a939d88b39b2ea9e82dd09b001011fa1c97ad3ab6dd4@group.calendar.google.com",
          "mode": "list",
          "cachedResultName": "Inspection Appointments"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', `Start time of the booking in ISO 8601 format WITHOUT timezone offset, e.g., 2025-04-12T15:00:00`, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', `End time of the booking in ISO 8601 format WITHOUT timezone offset, e.g., 2025-04-12T16:00:00`, 'string') }}",
        "useDefaultReminders": false,
        "additionalFields": {
          "description": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Description', ``, 'string') }}",
          "summary": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Summary', `This is the title of the event eg 'Inspection Appointment for [Customer Name]'`, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        2360,
        480
      ],
      "id": "656f0b81-a68f-443e-b94b-fb847d81144e",
      "name": "Book Appointment",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "w6RmgsUVZuLY0TCM",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.message.type }}",
                    "rightValue": "tool-calls",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "5fddf336-4da9-44ef-bd91-f5754c0f4381"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "952cb9c5-0653-45c7-bba0-f61c07275af8",
                    "leftValue": "={{ $json.body.message.type }}",
                    "rightValue": "end-of-call-report",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "8be73fbe-a07e-4381-a169-f6e1d187b2dd",
                    "leftValue": "={{ $json.body.message.endedReason }}",
                    "rightValue": "customer-did-not-answer",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        220,
        910
      ],
      "id": "26f4aaa3-20e5-4daf-abdd-000fe12ad0b9",
      "name": "Switch"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n   \"results\": [\n      {\n         \"toolCallId\": \"{{ $('bookAppointment').item.json.body.message.toolCalls[0].id}}\",\n         \"result\": \"{{ $json.output }}\"\n      }\n   ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        2560,
        360
      ],
      "id": "d5d98bc4-815b-4c98-ac79-cff524c17699",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n   \"results\": [\n      {\n         \"toolCallId\": \"{{ $('bookAppointment').item.json.body.message.toolCalls[0].id}}\",\n         \"result\": \"{{ $('Store Availability Result').item.json.Result }}\"\n      }\n   ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        2050,
        660
      ],
      "id": "f3dcd9ad-ed18-44a8-bc04-593c6c007574",
      "name": "Respond to Webhook1"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('bookAppointment').item.json.body.message.toolCalls[0].id }}",
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        1880,
        480
      ],
      "id": "170b7272-9417-4b94-b410-d41fca82bfc1",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0baafb44-c3e8-423e-84af-ea0004cb8ecf",
              "name": "Result",
              "value": "={{ $json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1210,
        510
      ],
      "id": "c84cc169-fd2a-445a-8f92-d2cd9d87286c",
      "name": "Store Availability Result"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('bookAppointment').item.json.body.message.toolCalls[0].id }}",
        "contextWindowLength": 15
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        780,
        630
      ],
      "id": "7ae61a1e-a27c-48ce-a22e-ab50944c9271",
      "name": "Simple Memory2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=This is the transcript --> {{ $json.Transcript }}\n\nThis is the summary --> {{ $json.Summary }}\n\n{{ $('bookAppointment').item.json.body.message.call.assistantOverrides.variableValues.id }}\n\nCall Evaluation --> {{ $('bookAppointment').item.json.body.message.analysis.successEvaluation }}",
        "options": {
          "systemMessage": "You are a helpful report taking assistant.\n\nUse the ID to match in the Airtable tool.\n\nUse the 'Update Report' tool to update the Summary and Transcript, and Status of the call. ",
          "returnIntermediateSteps": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        1140,
        820
      ],
      "id": "3e198d8b-cd89-4bb6-984c-80d725fe7879",
      "name": "Report Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1100,
        1030
      ],
      "id": "6a8ae2ef-6665-47d6-9946-32261e18f746",
      "name": "OpenAI 2",
      "credentials": {
        "openAiApi": {
          "id": "lwnvKDh7b8Veic38",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('bookAppointment').item.json.body.message.call.id }}",
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        1220,
        1030
      ],
      "id": "dd899639-8346-4fae-8c92-8c4bdf1bbd16",
      "name": "Memory 2"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appE5y13csfXlZpzx",
          "mode": "list",
          "cachedResultName": "Free Inspection Booking",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx"
        },
        "table": {
          "__rl": true,
          "value": "tbla2fmK5ZTEYEcuo",
          "mode": "list",
          "cachedResultName": "Leads",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx/tbla2fmK5ZTEYEcuo"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Status": "Called",
            "Summary": "={{ $json.Summary }}",
            "Transcript": "={{ $json.Transcript }}",
            "ID": "={{ $('bookAppointment').item.json.body.message.call.assistantOverrides.variableValues.id }}"
          },
          "matchingColumns": [
            "ID"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "First Name",
              "displayName": "First Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Phone Number",
              "displayName": "Phone Number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Address",
              "displayName": "Property Address",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Type",
              "displayName": "Property Type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Info",
              "displayName": "Property Info",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "In-Progress",
                  "value": "In-Progress"
                },
                {
                  "name": "Failed",
                  "value": "Failed"
                },
                {
                  "name": "Called",
                  "value": "Called"
                },
                {
                  "name": "Voicemail",
                  "value": "Voicemail"
                },
                {
                  "name": "TBC",
                  "value": "TBC"
                },
                {
                  "name": "t",
                  "value": "t"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Outcome",
              "displayName": "Outcome",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Appointment Booked",
                  "value": "Appointment Booked"
                },
                {
                  "name": "No Appointment",
                  "value": "No Appointment"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Inspection Date",
              "displayName": "Inspection Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attempt",
              "displayName": "Attempt",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "#1",
                  "value": "#1"
                },
                {
                  "name": "#2",
                  "value": "#2"
                },
                {
                  "name": "#3",
                  "value": "#3"
                },
                {
                  "name": "Unreachable",
                  "value": "Unreachable"
                },
                {
                  "name": "#Success",
                  "value": "#Success"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Transcript",
              "displayName": "Transcript",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Last Hope",
              "displayName": "Last Hope",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtableTool",
      "typeVersion": 2.1,
      "position": [
        1340,
        1030
      ],
      "id": "e56c076c-f2de-46c0-8132-fa3257fc375e",
      "name": "Update Report",
      "credentials": {
        "airtableTokenApi": {
          "id": "yGjpocFdI8wQrhte",
          "name": "Foluke-Levi Airtable"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "98f62b4b-7212-449a-9f28-b76d6432f497",
              "name": "Transcript",
              "value": "={{ $('bookAppointment').item.json.body.message.artifact.transcript }}",
              "type": "string"
            },
            {
              "id": "224557ca-70aa-43af-a388-db48f0a1fa9c",
              "name": "Summary",
              "value": "={{ $('bookAppointment').item.json.body.message.summary }}",
              "type": "string"
            },
            {
              "id": "2eb76a22-1d10-4ad5-9657-aefd76cca2ec",
              "name": "Booking Info",
              "value": "={{ $json.body.message.analysis.summary }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        770,
        810
      ],
      "id": "71c80791-1f13-436a-bb4b-469efa900d6a",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appE5y13csfXlZpzx",
          "mode": "list",
          "cachedResultName": "Free Inspection Booking",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx"
        },
        "table": {
          "__rl": true,
          "value": "tbla2fmK5ZTEYEcuo",
          "mode": "list",
          "cachedResultName": "Leads",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx/tbla2fmK5ZTEYEcuo"
        },
        "filterByFormula": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Filter_By_Formula', `The Customer name`, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtableTool",
      "typeVersion": 2.1,
      "position": [
        0,
        1470
      ],
      "id": "d5302cf0-773d-4b85-bf20-0b55166fad25",
      "name": "Get ID",
      "disabled": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "3c439a67-c01e-4269-99db-aed94f9841f5",
              "name": "toolCall_id",
              "value": "={{ $('bookAppointment').item.json.body.message.toolCalls[0].id }}",
              "type": "string"
            },
            {
              "id": "ba96831e-94c6-42ca-b42a-b4763159c73f",
              "name": "Booking Info",
              "value": "={{ $('bookAppointment').item.json.body.message.toolCalls[0].function.arguments }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        440,
        510
      ],
      "id": "a00cc724-55c2-4a0a-91d2-933a73b0bb2b",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "02c3776c-fe18-41e1-84af-d285089fa87d",
              "name": "ID",
              "value": "={{ $('bookAppointment').item.json.body.message.call.assistantOverrides.variableValues.id }}",
              "type": "string"
            },
            {
              "id": "2c74c0e7-9ef0-4c43-8228-2d58e5f38ec2",
              "name": "Name",
              "value": "={{ $('bookAppointment').item.json.body.message.call.assistantOverrides.variableValues.name }}",
              "type": "string"
            },
            {
              "id": "eb214637-8f66-4491-a3a8-531b08d020bb",
              "name": "Phone Number",
              "value": "={{ $('bookAppointment').item.json.body.message.call.assistantOverrides.variableValues.phoneNumber }}",
              "type": "string"
            },
            {
              "id": "9a53f499-8c58-4c03-bfdb-f56bef400cd4",
              "name": "Summary",
              "value": "={{ $('bookAppointment').item.json.body.message.endedReason }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        440,
        1210
      ],
      "id": "64672d09-c6dd-42c4-8481-18ec6fb83c15",
      "name": "Edit Fields3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "baad9c0c-a590-46b8-94f0-b2fe277815fc",
              "leftValue": "={{ $('bookAppointment').item.json.body.message.analysis.successEvaluation }}",
              "rightValue": "true",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        440,
        910
      ],
      "id": "c18018ed-50bd-48da-adcc-218ff741144d",
      "name": "If"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appE5y13csfXlZpzx",
          "mode": "list",
          "cachedResultName": "Free Inspection Booking",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx"
        },
        "table": {
          "__rl": true,
          "value": "tbla2fmK5ZTEYEcuo",
          "mode": "list",
          "cachedResultName": "Leads",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx/tbla2fmK5ZTEYEcuo"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $json.ID }}",
            "Status": "Called",
            "Summary": "={{ $json.Summary }}",
            "Attempt": "#1"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "First Name",
              "displayName": "First Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Phone Number",
              "displayName": "Phone Number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Address",
              "displayName": "Property Address",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Type",
              "displayName": "Property Type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Info",
              "displayName": "Property Info",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "In-Progress",
                  "value": "In-Progress"
                },
                {
                  "name": "Failed",
                  "value": "Failed"
                },
                {
                  "name": "Called",
                  "value": "Called"
                },
                {
                  "name": "Voicemail",
                  "value": "Voicemail"
                },
                {
                  "name": "TBC",
                  "value": "TBC"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Outcome",
              "displayName": "Outcome",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Appointment Booked",
                  "value": "Appointment Booked"
                },
                {
                  "name": "No Appointment",
                  "value": "No Appointment"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Inspection Date",
              "displayName": "Inspection Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attempt",
              "displayName": "Attempt",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "#1",
                  "value": "#1"
                },
                {
                  "name": "#2",
                  "value": "#2"
                },
                {
                  "name": "#3",
                  "value": "#3"
                },
                {
                  "name": "Unreachable",
                  "value": "Unreachable"
                },
                {
                  "name": "#Success",
                  "value": "#Success"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Transcript",
              "displayName": "Transcript",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Last Hope",
              "displayName": "Last Hope",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        770,
        1210
      ],
      "id": "fbc87f4f-acff-413c-a319-9d3d0cd052f1",
      "name": "Called & No Answer",
      "credentials": {
        "airtableTokenApi": {
          "id": "yGjpocFdI8wQrhte",
          "name": "Foluke-Levi Airtable"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appE5y13csfXlZpzx",
          "mode": "list",
          "cachedResultName": "Free Inspection Booking",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx"
        },
        "table": {
          "__rl": true,
          "value": "tbla2fmK5ZTEYEcuo",
          "mode": "list",
          "cachedResultName": "Leads",
          "cachedResultUrl": "https://airtable.com/appE5y13csfXlZpzx/tbla2fmK5ZTEYEcuo"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Status": "Failed",
            "Summary": "={{ $('bookAppointment').item.json.body.message.analysis.summary }}",
            "Attempt": "#1",
            "id": "={{ $('bookAppointment').item.json.body.message.call.assistantOverrides.variableValues.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "First Name",
              "displayName": "First Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Phone Number",
              "displayName": "Phone Number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Address",
              "displayName": "Property Address",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Type",
              "displayName": "Property Type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Property Info",
              "displayName": "Property Info",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "In-Progress",
                  "value": "In-Progress"
                },
                {
                  "name": "Failed",
                  "value": "Failed"
                },
                {
                  "name": "Called",
                  "value": "Called"
                },
                {
                  "name": "Voicemail",
                  "value": "Voicemail"
                },
                {
                  "name": "TBC",
                  "value": "TBC"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Outcome",
              "displayName": "Outcome",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Appointment Booked",
                  "value": "Appointment Booked"
                },
                {
                  "name": "No Appointment",
                  "value": "No Appointment"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Inspection Date",
              "displayName": "Inspection Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attempt",
              "displayName": "Attempt",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "#1",
                  "value": "#1"
                },
                {
                  "name": "#2",
                  "value": "#2"
                },
                {
                  "name": "#3",
                  "value": "#3"
                },
                {
                  "name": "Unreachable",
                  "value": "Unreachable"
                },
                {
                  "name": "#Success",
                  "value": "#Success"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Summary",
              "displayName": "Summary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Transcript",
              "displayName": "Transcript",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Last Hope",
              "displayName": "Last Hope",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        770,
        1010
      ],
      "id": "3d272500-56e4-4428-8488-d2f120e6999a",
      "name": "Called & Voicemail",
      "credentials": {
        "airtableTokenApi": {
          "id": "yGjpocFdI8wQrhte",
          "name": "Foluke-Levi Airtable"
        }
      }
    },
    {
      "parameters": {
        "content": "### Booking Workflow\nCheck Availability & Create Booking",
        "height": 120,
        "width": 220
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        340,
        340
      ],
      "id": "6ae7ca58-4df9-49c8-98e9-3506ab22b9f7",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "### Called, But No Answer\nStatus updated to Called.\nSummary uploaded.",
        "height": 100,
        "width": 220
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        700,
        1380
      ],
      "id": "e44641cc-78e2-4a48-88fc-dff476f83f7a",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "### Successful Call Report\nStatus, Summary & Transcript Updated\n\n",
        "height": 100
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1500,
        820
      ],
      "id": "70ed80ee-5157-4674-a4c1-cec51f8e5b33",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "### Called, But Voicemail",
        "height": 80,
        "width": 150
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        600,
        1040
      ],
      "id": "05c872c9-2a99-41f5-910e-a44b4cd665be",
      "name": "Sticky Note3"
    }
  ],
